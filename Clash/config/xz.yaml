# å…¨å±€é…ç½® 
# è‡ªåŠ¨åŒæ­¥æ—¶é—´ä»¥é˜²æ­¢æ—¶é—´ä¸å‡†å¯¼è‡´æ— æ³•æ­£å¸¸è”ç½‘
#ntp:
#  enable: true
  # æ˜¯å¦åŒæ­¥è‡³ç³»ç»Ÿæ—¶é—´ï¼Œéœ€è¦ root/ç®¡ç†å‘˜æƒé™
#  write-to-system: false
#  server: time.apple.com
#  port: 123
#  interval: 30
  
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: "*"
ipv6: false
log-level: warning

# interface-name: en0
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
profile:
  store-selected: true
  store-fake-ip: true
unified-delay: true                # å¯ç”¨ç»Ÿä¸€å»¶è¿ŸåŠŸèƒ½ï¼ˆæ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼,å»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿï¼‰Add commentMore actions
tcp-concurrent: true               # å…è®¸å¹¶å‘TCPè¿æ¥ï¼ˆåŒæ—¶å¯¹æ‰€æœ‰ipè¿›è¡Œè¿æ¥ï¼Œè¿”å›å»¶è¿Ÿæœ€ä½çš„åœ°å€ï¼‰
find-process-mode: strict          # æŒ‡å®šClashæŸ¥æ‰¾è¿›ç¨‹çš„æ¨¡å¼
#global-client-fingerprint: chrome  # å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹çš„ç±»å‹ï¼ˆrandom è¡¨ç¤ºéšæœºæŒ‡çº¹ï¼‰
geodata-loader: standard           # æŒ‡å®šåœ°ç†æ•°æ®åŠ è½½å™¨
geodata-mode: true                 # å¼€å¯è‡ªå®šä¹‰GeoIP2
geo-auto-update: true              # å¼€å¯è‡ªåŠ¨æ›´æ–°GeoIP2
geo-update-interval: 24            # æ›´æ–°é—´éš”ï¼ˆå•ä½ï¼šå°æ—¶ï¼‰
geox-url:                          # GeoIP2æ•°æ®åº“é“¾æ¥
  geoip: 'https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geoip.dat'
  geosite: 'https://raw.githubusercontent.com/Loyalsoldier/v2ray-rules-dat/release/geosite.dat'
  mmdb: 'https://gitlab.com/Masaiki/GeoIP2-CN/-/raw/release/Country.mmdb'
  asn: 'https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb'

# æ§åˆ¶é¢æ¿
#external-controller: 0.0.0.0:9090
#secret: ""
#external-ui: "/etc/mihomo/run/ui"
#external-ui-name: zashboard
#external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"

# å—…æ¢

sniffer:
  enable: true                # å¯ç”¨å—…æ¢åŠŸèƒ½
  force-dns-mapping: true     # å¼ºåˆ¶æ‰§è¡ŒDNSæ˜ å°„è§„åˆ™
  parse-pure-ip: true         # è§£æçº¯IPæµé‡
  override-destination: true  # è¦†ç›–æµé‡çš„ç›®æ ‡åœ°å€
  sniff:                      # é…ç½®å—…æ¢è§„åˆ™ç«¯å£
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:               # å¼ºåˆ¶è§£æçš„åŸŸååˆ—è¡¨
    - +.v2ex.com
  skip-domain:                # è·³è¿‡è§£æçš„åŸŸååˆ—è¡¨
#    - Mijia Cloud
    - "+.baidu.com"

# å…¥ç«™  
tun:
  enable: true
  # system/gvisor/mixed
  stack: mixed
  dns-hijack: ["any:53", "tcp://any:53", "any:853"]
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

# DNSæ¨¡å—
dns:
  proxy: true
  enable: true
  ipv6: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "*.xboxlive.com"
    - "*.teafone.com"
    - "*.sktswe.net"
    - "rtc.goodfone.co.kr"
    - "*.chattti.com"
  fallback-filter:
    ipcidr:
      - 0.0.0.0/8
      - 10.0.0.0/8
      - 100.64.0.0/10
      - 127.0.0.0/8
      - 169.254.0.0/16
      - 172.16.0.0/12
      - 192.168.0.0/16
      - 224.0.0.0/4
      - 240.0.0.0/4
      - 255.255.255.255/32
      - ::/128
      - ::1/128
      - ::ffff:0:0/96
      - 64:ff9b::/96
      - 100::/64
      - 2001::/32
      - 2001:20::/28
      - 2001:db8::/32
      - 2002::/16
      - fc00::/7
      - fe80::/10
      - ff00::/8
  default-nameserver:
    - 223.5.5.5  
    - 119.29.29.29  
  nameserver:
    - 'https://cloudflare-dns.com/dns-query#proxy'
    - 'https://dns.google/dns-query#proxy'
    - 'tls://1.1.1.1:853#proxy'
    - 'tls://8.8.8.8:853#proxy'
  direct-nameserver:
    - https://doh.pub/dns-query
    - tls://119.29.29.29:853
    - https://223.5.5.5/dns-query
    - tls://223.5.5.5:853
    - tls://114.114.114.114:853
    - tls://dot.360.cn:853
    - https://doh.360.cn/dns-query

 
# å‡ºç«™ç­–ç•¥
# æ³¨æ„é”šç‚¹å¿…é¡»æ”¾åœ¨å¼•ç”¨çš„ä¸Šæ–¹ï¼Œå¯ä»¥é›†ä¸­æŠŠé”šç‚¹å…¨éƒ¨æ”¾yamlçš„é¡¶éƒ¨ã€‚
pr: &pr {type: select, proxies: [ğŸš€ é»˜è®¤ä»£ç†, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸŒ ç‰¹æ®ŠèŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]}
proxy-groups:
  - {name: ğŸš€ é»˜è®¤ä»£ç†, type: select, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸŒ ç‰¹æ®ŠèŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]}
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, type: select, include-all: true}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *pr}
  - {name: ğŸ® æ¸¸æˆå¹³å°, <<: *pr}
  - {name: ğŸ’¬ Aiå¹³å°, <<: *pr}
  - {name: â“‚ï¸ å¾®è½¯äº‘ç›˜, <<: *pr}
  - {name: ğŸªŸ å¾®è½¯æœåŠ¡, <<: *pr}
  - {name: ğŸ“º å“”å“©å“”å“©, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹]}
  - {name: ğŸ¥ å¥ˆé£è§†é¢‘, type: select, proxies: [ğŸ¥ å¥ˆé£èŠ‚ç‚¹, ğŸš€ é»˜è®¤ä»£ç†, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸŒ ç‰¹æ®ŠèŠ‚ç‚¹, ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, DIRECT]}
  - {name: ğŸ› ï¸ è‡ªå®šä¹‰, <<: *pr}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ¸¯|HK|hk|Hong Kong|HongKong|hongkong"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "^(?=.*(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|LA|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States))(?!.*(Claw)).*"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore"}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan"}
  - {name: ğŸŒ ç‰¹æ®ŠèŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)åœŸ|åœŸè€³å…¶|é˜¿|é˜¿æ ¹å»·|å°¼|å°¼æ—¥åˆ©äºš|å°åº¦|Tr|Turkey|TR|AG|Ag|Argentina|Nigeria|NI|Ni"}
  - {name: ğŸ¥ å¥ˆé£èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)NF|å¥ˆé£|è§£é”|Netflix|NETFLIX|Media"}

  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, ğŸš€ é»˜è®¤ä»£ç†]}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT, DIRECT]}

# è§„åˆ™åŒ¹é…
# æ­¤è§„åˆ™éƒ¨åˆ†æ²¡æœ‰åšé˜²æ³„éœ²å¤„ç†ï¼Œå› ä¸ºå¼Šä¸¥é‡å¤§äºåˆ©ï¼
rules:
  - RULE-SET,myproxy,ğŸ› ï¸ è‡ªå®šä¹‰
  - RULE-SET,mydirect,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,bilibilihmt,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,lan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,unban,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,googlecn,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,steamcn,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,googlefcm,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,chinamedia,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,chinaip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,chinadomain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,chinacompanyip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,download,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,LAN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,banad,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,banprogramad,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,myban,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,onedrive,â“‚ï¸ å¾®è½¯äº‘ç›˜
  - RULE-SET,microsoft,ğŸªŸ å¾®è½¯æœåŠ¡
  - RULE-SET,ai,ğŸ’¬ Aiå¹³å°
  - RULE-SET,openai,ğŸ’¬ Aiå¹³å°
  - RULE-SET,epic,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,origin,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,sony,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,nintendo,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,netflix,ğŸ¥ å¥ˆé£è§†é¢‘
  - RULE-SET,gfwlist,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,proxymedia,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,telegram,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,youtube,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,bing,ğŸš€ é»˜è®¤ä»£ç†
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
  

# è§„åˆ™é›†
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers: 
  myproxy: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Myproxy.list"}
  mydirect: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Mydirect.list"}
  bilibilihmt: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/BilibiliHMT.list"}
  bilibili: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Bilibili.list"}
  lan: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/LocalAreaNetwork.list"}
  unban: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/UnBan.list"}
  googlecn: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/GoogleCN.list"}
  steamcn: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/SteamCN.list"}
  googlefcm: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/GoogleFCM.list"}
  apple: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Apple.list"}
  chinamedia: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ChinaMedia.list"}
  chinaip: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ChinaIp.list"}
  chinadomain: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ChinaDomain.list"}
  chinacompanyip: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ChinaCompanyIp.list"}
  download: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Download.list"}
  banad: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/BanAD.list"}
  banprogramad: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/BanProgramAD.list"}
  myban: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Myban.list"}
  onedrive: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/OneDrive.list"}
  microsoft: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Microsoft.list"}
  ai: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/AI.list"} 
  openai: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/OpenAi.list"}
  epic: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Epic.list"}
  origin: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Origin.list"}
  sony: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Sony.list"}
  steam: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Steam.list"}
  nintendo: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Nintendo.list"}
  netflix: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/Netflix.list"}
  gfwlist: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ProxyGFWlist.list"}
  proxymedia: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/ProxyMedia.list"}
  telegram: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Telegram.list"}
  youtube: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Ruleset/YouTube.list"}
  bing: { <<: *class, url: "https://raw.githubusercontent.com/xzinvisible/clash-rules/master/Clash/Bing.list"}

